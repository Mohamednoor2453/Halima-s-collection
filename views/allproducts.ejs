<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Halima's Admin</title>
    <link rel="stylesheet" href="public/css/style.css">
</head>
<body>
    <div class="sidebar">
        <ul>
            <li>
                <a href="#dashboardDropdown" onclick="toggleDropdown('dashboardDropdown')">Dashboard</a>
                <ul id="dashboardDropdown" style="display: none;">
                    <li><a href="dashboard.html">Dashboard Home</a></li>
                    <li><a href="#">Analytics</a></li>
                </ul>
            </li>

            <li>
                <a href="#usersDropdown" onclick="toggleDropdown('usersDropdown')">Users</a>
                <ul id="usersDropdown" style="display: none;">
                    <li><a href="#">All Users</a></li>
                    <li><a href="#">Add New User</a></li>
                    <li><a href="#">User Roles</a></li>
                </ul>
            </li>

            <li>
                <a href="#productsDropdown" onclick="toggleDropdown('productsDropdown')">Products</a>
                <ul id="productsDropdown" style="display: none;">
                    <li><a href="/admin/addedProducts">All Products</a></li>
                    <li><a href="/admin/addingProducts">Add New Product</a></li>
                    <li><a href="#">Delete Product</a></li>
                </ul>
            </li>

            <li>
                <a href="#settingsDropdown" onclick="toggleDropdown('settingsDropdown')">Settings</a>
                <ul id="settingsDropdown" style="display: none;">
                    <li><a href="settings.html">Change Password</a></li>
                </ul>
            </li>
        </ul>
    </div>

    <div class="content">
        <h1>Product Added Successfully</h1>
        
        <!-- Placeholder elements to dynamically populate the product details -->
        <p><strong>Product Name:</strong> <span id="productName"></span></p>
        <p><strong>Price:</strong> Ksh <span id="productPrice"></span></p>
        <p><strong>Image:</strong> <img id="productImage" alt="Product Image" style="max-width: 200px;"></p>

        <a href="/admin/addingProducts">Add another product</a>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                const response = await fetch('/admin/addedProducts');
                const data = await response.json();
                
                if (data.success) {
                    const products = data.products;
                    const productList = document.querySelector('.content');
                    products.forEach(product => {
                        const productItem = `
                            <p><strong>Product Name:</strong> ${product.name}</p>
                            <p><strong>Price:</strong> Ksh ${product.price}</p>
                            <p><strong>Image:</strong> <img src="${product.images[0]}" alt="Product Image" style="max-width: 200px;"></p>
                            <hr>
                        `;
                        productList.innerHTML += productItem;
                    });
                } else {
                    document.querySelector('.content').innerHTML = '<p>No products available yet.</p>';
                }
            } catch (error) {
                console.error('Error fetching products:', error);
            }
        });
    </script>
</body>
</html>
